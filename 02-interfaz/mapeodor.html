<!DOCTYPE html>
<html>
<head>
    <title>Mapeador de Coordenadas PDF</title>
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; background: #2c3e50; color: white; }
        #pdf-container { position: relative; display: inline-block; margin-top: 20px; border: 5px solid #bdc3c7; cursor: crosshair; }
        canvas { display: block; }
        .info-panel { position: fixed; top: 10px; right: 10px; background: white; color: black; padding: 15px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
    </style>
</head>
<body>
    <h1>Mapeador de Coordenadas para Entrevista</h1>
    <p>Haz clic en cualquier parte de la hoja para ver sus coordenadas (X, Y)</p>
    
    <div class="info-panel">
        <strong>Coordenada detectada:</strong>
        <div id="coords">X: 0, Y: 0</div>
        <small>(Usa estos valores en tu main.js)</small>
    </div>

    <div id="pdf-container">
        <canvas id="pdf-canvas"></canvas>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script>
        const url = './plantilla_entrevista.pdf'; // Tu archivo original
        const canvas = document.getElementById('pdf-canvas');
        const ctx = canvas.getContext('2d');

        pdfjsLib.getDocument(url).promise.then(pdf => {
            pdf.getPage(1).then(page => {
                const viewport = page.getViewport({ scale: 1.5 });
                canvas.height = viewport.height;
                canvas.width = viewport.width;

                page.render({ canvasContext: ctx, viewport: viewport });

                canvas.addEventListener('mousedown', function(e) {
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    // Conversión a puntos de PDF (A4 es aprox 595x842)
                    const pdfX = Math.round((x / canvas.width) * 595);
                    const pdfY = Math.round(842 - (y / canvas.height) * 842);

                    document.getElementById('coords').innerHTML = `<strong>X: ${pdfX}, Y: ${pdfY}</strong>`;
                    console.log(`Coordenada para código: { x: ${pdfX}, y: ${pdfY} }`);
                });
            });
        });
    </script>
</body>
</html>